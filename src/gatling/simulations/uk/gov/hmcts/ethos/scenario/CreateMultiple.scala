package uk.gov.hmcts.ethos.scenario
import java.util.UUID.randomUUID
import io.gatling.core.Predef._
import io.gatling.http.Predef._
import scala.concurrent.duration._
import uk.gov.hmcts.ethos.scenario.utils._

import scala.util.Random

object CreateMultiple {

    val url = Environment.baseURL
    val MinThinkTime = Environment.minThinkTime
    val MaxThinkTime = Environment.maxThinkTime
    private def createMultiuUID: String = randomUUID.toString

    val rndMultiCaseType = new Random(System.currentTimeMillis())
    //val createMultiCaseTypeVal_random_index = rndMultiCaseType.nextInt(createMultiCaseTypeVal.length)
    //val createMultiCaseType = createMultiCaseTypeVal(createMultiCaseTypeVal_random_index)
    //private def PickMultiCasetype(): String = createMultiCaseType

    val CreateMultipleCase_10 =
    exec(_.setAll(
      ("createMultiUUID", createMultiuUID),
      //("PickMultiCaseTypeVal", PickMultiCasetype())
      ))

      .exec(http("ET01_CreateMultipleCase_10Claims")
        .post(url + "/api/v2/claims/build_claim")
        .body(StringBody("{\"uuid\":\"{$createMultiUUID}\",\"command\":\"SerialSequence\",\"data\":[{\"uuid\":\"d86592db-1e58-48a7-baa8-a952751227a7\",\"command\":\"BuildClaim\",\"data\":{\"employment_details\":{\"start_date\":\"2009-11-18\",\"end_date\":null,\"notice_period_end_date\":null,\"job_title\":\"agriculturist\",\"average_hours_worked_per_week\":38.0,\"gross_pay\":3000,\"gross_pay_period_type\":\"monthly\",\"net_pay\":2000,\"net_pay_period_type\":\"monthly\",\"worked_notice_period_or_paid_in_lieu\":null,\"notice_pay_period_type\":null,\"notice_pay_period_count\":null,\"enrolled_in_pension_scheme\":true,\"benefit_details\":\"Company car, private health care\",\"found_new_job\":null,\"new_job_start_date\":null,\"new_job_gross_pay\":null},\"submission_reference\":\"J704-ZK5E\",\"submission_channel\":\"Web\",\"case_type\":\"Single\",\"jurisdiction\":\"2\",\"office_code\":\"22\",\"date_of_receipt\":\"2019-09-26T11:37:48+0000\",\"other_known_claimant_names\":\"\",\"discrimination_claims\":[],\"pay_claims\":[],\"desired_outcomes\":[],\"other_claim_details\":\"\",\"claim_details\":\"\",\"other_outcome\":\"\",\"send_claim_to_whistleblowing_entity\":false,\"miscellaneous_information\":\"\",\"is_unfair_dismissal\":false,\"pdf_template_reference\":\"et1-v1-en\"}},{\"uuid\":\"af0af0fe-9d94-4cd3-910e-5eb8cd56b892\",\"command\":\"BuildPrimaryRespondent\",\"data\":{\"name\":\"dodgy_co\",\"address_attributes\":{\"building\":\"the_shard\",\"street\":\"downing_street\",\"locality\":\"westminster\",\"county\":\"\",\"post_code\":\"G1 2FF\"},\"organisation_more_than_one_site\":false,\"work_address_attributes\":{\"building\":\"the_shard\",\"street\":\"downing_street\",\"locality\":\"westminster\",\"county\":\"\",\"post_code\":\"G1 2FF\"},\"contact\":\"John Smith\",\"dx_number\":\"\",\"address_telephone_number\":\"\",\"work_address_telephone_number\":\"\",\"alt_phone_number\":\"\",\"contact_preference\":\"email\",\"email_address\":\"john@dodgyco.com\",\"fax_number\":\"\",\"organisation_employ_gb\":10,\"employment_at_site_number\":5,\"disability\":true,\"disability_information\":\"Lorem ipsum disability\",\"acas_certificate_number\":\"AC123456/78/90\",\"acas_exemption_code\":null}},{\"uuid\":\"dde5ef20-3aea-4e2d-8d72-fb563ca0e784\",\"command\":\"BuildPrimaryClaimant\",\"data\":{\"title\":\"Mr\",\"first_name\":\"First\",\"last_name\":\"Last\",\"address_attributes\":{\"building\":\"102\",\"street\":\"Petty France\",\"locality\":\"London\",\"county\":\"Greater London\",\"post_code\":\"SE11 9AA\",\"country\":\"United Kingdom\"},\"address_telephone_number\":\"01234 567890\",\"mobile_number\":\"01234 098765\",\"email_address\":\"test@digital.justice.gov.uk\",\"fax_number\":null,\"contact_preference\":\"Email\",\"gender\":\"Male\",\"date_of_birth\":\"1982-11-21\",\"special_needs\":null}},{\"uuid\":\"013fac72-7f06-4078-b656-cbf47b5f82b1\",\"command\":\"BuildSecondaryClaimants\",\"data\":[{\"title\":\"Mr\",\"first_name\":\"First\",\"last_name\":\"Last\",\"address_attributes\":{\"building\":\"102\",\"street\":\"Petty France\",\"locality\":\"London\",\"county\":\"Greater London\",\"post_code\":\"SW1H 9AJ\"},\"address_telephone_number\":\"01234 567890\",\"mobile_number\":\"01234 098765\",\"email_address\":\"test@digital.justice.gov.uk\",\"fax_number\":null,\"contact_preference\":\"Email\",\"gender\":\"Male\",\"date_of_birth\":\"1982-11-21\",\"special_needs\":null},{\"title\":\"Mr\",\"first_name\":\"First\",\"last_name\":\"Last\",\"address_attributes\":{\"building\":\"102\",\"street\":\"Petty France\",\"locality\":\"London\",\"county\":\"Greater London\",\"post_code\":\"SW1H 9AJ\"},\"address_telephone_number\":\"01234 567890\",\"mobile_number\":\"01234 098765\",\"email_address\":\"test@digital.justice.gov.uk\",\"fax_number\":null,\"contact_preference\":\"Email\",\"gender\":\"Male\",\"date_of_birth\":\"1982-11-21\",\"special_needs\":null},{\"title\":\"Mr\",\"first_name\":\"First\",\"last_name\":\"Last\",\"address_attributes\":{\"building\":\"102\",\"street\":\"Petty France\",\"locality\":\"London\",\"county\":\"Greater London\",\"post_code\":\"SW1H 9AJ\"},\"address_telephone_number\":\"01234 567890\",\"mobile_number\":\"01234 098765\",\"email_address\":\"test@digital.justice.gov.uk\",\"fax_number\":null,\"contact_preference\":\"Email\",\"gender\":\"Male\",\"date_of_birth\":\"1982-11-21\",\"special_needs\":null},{\"title\":\"Mr\",\"first_name\":\"First\",\"last_name\":\"Last\",\"address_attributes\":{\"building\":\"102\",\"street\":\"Petty France\",\"locality\":\"London\",\"county\":\"Greater London\",\"post_code\":\"SW1H 9AJ\"},\"address_telephone_number\":\"01234 567890\",\"mobile_number\":\"01234 098765\",\"email_address\":\"test@digital.justice.gov.uk\",\"fax_number\":null,\"contact_preference\":\"Email\",\"gender\":\"Male\",\"date_of_birth\":\"1982-11-21\",\"special_needs\":null},{\"title\":\"Mr\",\"first_name\":\"First\",\"last_name\":\"Last\",\"address_attributes\":{\"building\":\"102\",\"street\":\"Petty France\",\"locality\":\"London\",\"county\":\"Greater London\",\"post_code\":\"SW1H 9AJ\"},\"address_telephone_number\":\"01234 567890\",\"mobile_number\":\"01234 098765\",\"email_address\":\"test@digital.justice.gov.uk\",\"fax_number\":null,\"contact_preference\":\"Email\",\"gender\":\"Male\",\"date_of_birth\":\"1982-11-21\",\"special_needs\":null},{\"title\":\"Mr\",\"first_name\":\"First\",\"last_name\":\"Last\",\"address_attributes\":{\"building\":\"102\",\"street\":\"Petty France\",\"locality\":\"London\",\"county\":\"Greater London\",\"post_code\":\"SW1H 9AJ\"},\"address_telephone_number\":\"01234 567890\",\"mobile_number\":\"01234 098765\",\"email_address\":\"test@digital.justice.gov.uk\",\"fax_number\":null,\"contact_preference\":\"Email\",\"gender\":\"Male\",\"date_of_birth\":\"1982-11-21\",\"special_needs\":null},{\"title\":\"Mr\",\"first_name\":\"First\",\"last_name\":\"Last\",\"address_attributes\":{\"building\":\"102\",\"street\":\"Petty France\",\"locality\":\"London\",\"county\":\"Greater London\",\"post_code\":\"SW1H 9AJ\"},\"address_telephone_number\":\"01234 567890\",\"mobile_number\":\"01234 098765\",\"email_address\":\"test@digital.justice.gov.uk\",\"fax_number\":null,\"contact_preference\":\"Email\",\"gender\":\"Male\",\"date_of_birth\":\"1982-11-21\",\"special_needs\":null},{\"title\":\"Mr\",\"first_name\":\"First\",\"last_name\":\"Last\",\"address_attributes\":{\"building\":\"102\",\"street\":\"Petty France\",\"locality\":\"London\",\"county\":\"Greater London\",\"post_code\":\"SW1H 9AJ\"},\"address_telephone_number\":\"01234 567890\",\"mobile_number\":\"01234 098765\",\"email_address\":\"test@digital.justice.gov.uk\",\"fax_number\":null,\"contact_preference\":\"Email\",\"gender\":\"Male\",\"date_of_birth\":\"1982-11-21\",\"special_needs\":null},{\"title\":\"Mr\",\"first_name\":\"First\",\"last_name\":\"Last\",\"address_attributes\":{\"building\":\"102\",\"street\":\"Petty France\",\"locality\":\"London\",\"county\":\"Greater London\",\"post_code\":\"SW1H 9AJ\"},\"address_telephone_number\":\"01234 567890\",\"mobile_number\":\"01234 098765\",\"email_address\":\"test@digital.justice.gov.uk\",\"fax_number\":null,\"contact_preference\":\"Email\",\"gender\":\"Male\",\"date_of_birth\":\"1982-11-21\",\"special_needs\":null}]},{\"uuid\":\"0d2e5a43-55ab-49c2-b9c5-22be0b3eacc3\",\"command\":\"BuildSecondaryRespondents\",\"data\":[{\"name\":\"dodgy_co\",\"address_attributes\":{\"building\":\"the_shard\",\"street\":\"downing_street\",\"locality\":\"westminster\",\"county\":\"\",\"post_code\":\"wc1 1aa\"},\"organisation_more_than_one_site\":false,\"work_address_attributes\":{\"building\":\"the_shard\",\"street\":\"downing_street\",\"locality\":\"westminster\",\"county\":\"\",\"post_code\":\"wc1 1aa\"},\"contact\":\"John Smith\",\"dx_number\":\"\",\"address_telephone_number\":\"\",\"work_address_telephone_number\":\"\",\"alt_phone_number\":\"\",\"contact_preference\":\"email\",\"email_address\":\"john@dodgyco.com\",\"fax_number\":\"\",\"organisation_employ_gb\":10,\"employment_at_site_number\":5,\"disability\":true,\"disability_information\":\"Lorem ipsum disability\",\"acas_certificate_number\":\"AC123456/78/90\",\"acas_exemption_code\":null}]},{\"uuid\":\"f90da5e7-9dbe-45fc-af0e-3415b94a56c5\",\"command\":\"BuildPrimaryRepresentative\",\"data\":{\"address_attributes\":{\"building\":\"Rep Building\",\"street\":\"Rep Street\",\"locality\":\"Rep Town\",\"county\":\"Rep County\",\"post_code\":\"WC2 2BB\"},\"name\":\"James Doe\",\"organisation_name\":\"repco ltd\",\"address_telephone_number\":\"0207 987 6543\",\"mobile_number\":\"07987654321\",\"representative_type\":\"Private Individual\",\"dx_number\":\"dx address\",\"reference\":\"Rep Ref\",\"contact_preference\":\"fax\",\"email_address\":\"test@email.com\",\"fax_number\":\"0207 345 6789\"}},{\"uuid\":\"cc985d6a-fbc3-4939-9a3a-0dede8420680\",\"command\":\"BuildPdfFile\",\"data\":{\"data_url\":\"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf\",\"data_from_key\":null,\"filename\":\"et1_first_last.pdf\",\"checksum\":\"ee2714b8b731a8c1e95dffaa33f89728\"}}]}"))
        .header("Content-Type", "application/json")
        .header("Accept", "application/json"))

       .pause(1 seconds, 2 seconds)

    val CreateMultipleCase_100 =
    exec(_.setAll(
      ("createMultiUUID", createMultiuUID),
      //("PickMultiCaseTypeVal", PickMultiCasetype())
      ))

      .exec(http("ET01_CreateMultipleCase_100Claims")
        .post(url + "/api/v2/claims/build_claim")
        .body(RawFileBody("100claimpayload.json"))
        .header("Content-Type", "application/json")
        .header("Accept", "application/json"))

       .pause(1 seconds, 2 seconds)
}
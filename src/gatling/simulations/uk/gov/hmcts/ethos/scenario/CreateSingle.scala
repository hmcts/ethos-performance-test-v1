package uk.gov.hmcts.ethos.scenario
import java.util.UUID.randomUUID
import io.gatling.core.Predef._
import io.gatling.http.Predef._
import scala.concurrent.duration._
import uk.gov.hmcts.ethos.scenario.utils._

import scala.util.Random

object CreateSingle {

    val url = Environment.baseURL
    val MinThinkTime = Environment.minThinkTime
    val MaxThinkTime = Environment.maxThinkTime
    private def createSingleuUID: String = randomUUID.toString

    val rndCaseType = new Random(System.currentTimeMillis())
    //val createSingleCaseTypeVal_random_index = rndCaseType.nextInt(createSingleCaseTypeVal.length)
    //val createSingleCaseType = createSingleCaseTypeVal(createSingleCaseTypeVal_random_index)
    //private def PickSingleCasetype(): String = createSingleCaseType

    val CreateSingleCase =
      exec(_.setAll(
      ("createSingleUUID", createSingleuUID),
        //("PickSingleCaseType",PickSingleCasetype())
    ))

      .exec(http("ET01_CreateSingleCase")
        .post("/api/v2/claims/build_claim")
        //.body(StringBody("{\n  \"uuid\": \"${createSingleUUID}\",\n  \"command\": \"SerialSequence\",\n  \"data\": [\n    {\n      \"uuid\": \"d86592db-1e58-48a7-baa8-a952751227a7\",\n      \"command\": \"BuildClaim\",\n      \"data\": {\n        \"employment_details\": {\n          \"start_date\": \"2009-11-18\",\n          \"end_date\": null,\n          \"notice_period_end_date\": null,\n          \"job_title\": \"agriculturist\",\n          \"average_hours_worked_per_week\": 38.0,\n          \"gross_pay\": 3000,\n          \"gross_pay_period_type\": \"monthly\",\n          \"net_pay\": 2000,\n          \"net_pay_period_type\": \"monthly\",\n          \"worked_notice_period_or_paid_in_lieu\": null,\n          \"notice_pay_period_type\": null,\n          \"notice_pay_period_count\": null,\n          \"enrolled_in_pension_scheme\": true,\n          \"benefit_details\": \"Company car, private health care\",\n          \"found_new_job\": null,\n          \"new_job_start_date\": null,\n          \"new_job_gross_pay\": null\n        },\n        \"submission_reference\": \"J704-ZK5E\",\n        \"submission_channel\": \"Web\",\n        \"case_type\": \"Single\",\n        \"jurisdiction\": \"2\",\n        \"office_code\": \"22\",\n        \"date_of_receipt\": \"2020-05-22T11:37:48+0000\",\n        \"other_known_claimant_names\": \"\",\n        \"discrimination_claims\": [\n\n        ],\n        \"pay_claims\": [\n\n        ],\n        \"desired_outcomes\": [\n\n        ],\n        \"other_claim_details\": \"\",\n        \"claim_details\": \"\",\n        \"other_outcome\": \"\",\n        \"send_claim_to_whistleblowing_entity\": false,\n        \"miscellaneous_information\": \"\",\n        \"is_unfair_dismissal\": false,\n        \"pdf_template_reference\": \"et1-v1-en\"\n      }\n    },\n    {\n      \"uuid\": \"af0af0fe-9d94-4cd3-910e-5eb8cd56b892\",\n      \"command\": \"BuildPrimaryRespondent\",\n      \"data\": {\n        \"name\": \"dodgy_co\",\n        \"address_attributes\": {\n          \"building\": \"the_shard\",\n          \"street\": \"downing_street\",\n          \"locality\": \"westminster\",\n          \"county\": \"\",\n          \"post_code\": \"G1 2FF\"\n        },\n        \"organisation_more_than_one_site\": false,\n        \"work_address_attributes\": {\n          \"building\": \"the_shard\",\n          \"street\": \"downing_street\",\n          \"locality\": \"westminster\",\n          \"county\": \"\",\n          \"post_code\": \"G1 2FF\"\n        },\n        \"contact\": \"John Smith\",\n        \"dx_number\": \"\",\n        \"address_telephone_number\": \"\",\n        \"work_address_telephone_number\": \"\",\n        \"alt_phone_number\": \"\",\n        \"contact_preference\": \"email\",\n        \"email_address\": \"john@dodgyco.com\",\n        \"fax_number\": \"\",\n        \"organisation_employ_gb\": 10,\n        \"employment_at_site_number\": 5,\n        \"disability\": true,\n        \"disability_information\": \"Lorem ipsum disability\",\n        \"acas_certificate_number\": \"AC123456/78/90\",\n        \"acas_exemption_code\": null\n      }\n    },\n    {\n      \"uuid\": \"dde5ef20-3aea-4e2d-8d72-fb563ca0e784\",\n      \"command\": \"BuildPrimaryClaimant\",\n      \"data\": {\n        \"title\": \"Mr\",\n        \"first_name\": \"First\",\n        \"last_name\": \"Last\",\n        \"address_attributes\": {\n          \"building\": \"102\",\n          \"street\": \"Petty France\",\n          \"locality\": \"London\",\n          \"county\": \"Greater London\",\n          \"post_code\": \"SW1H 9AJ\",\n          \"country\": \"United Kingdom\"\n        },\n        \"address_telephone_number\": \"01234 567890\",\n        \"mobile_number\": \"01234 098765\",\n        \"email_address\": \"test@digital.justice.gov.uk\",\n        \"fax_number\": null,\n        \"contact_preference\": \"Email\",\n        \"gender\": \"Male\",\n        \"date_of_birth\": \"1982-11-21\",\n        \"special_needs\": null\n      }\n    },\n    {\n      \"uuid\": \"0d2e5a43-55ab-49c2-b9c5-22be0b3eacc3\",\n      \"command\": \"BuildSecondaryRespondents\",\n      \"data\": [\n        {\n          \"name\": \"dodgy_co\",\n          \"address_attributes\": {\n            \"building\": \"the_shard\",\n            \"street\": \"downing_street\",\n            \"locality\": \"westminster\",\n            \"county\": \"\",\n            \"post_code\": \"wc1 1aa\"\n          },\n          \"organisation_more_than_one_site\": false,\n          \"work_address_attributes\": {\n            \"building\": \"the_shard\",\n            \"street\": \"downing_street\",\n            \"locality\": \"westminster\",\n            \"county\": \"\",\n            \"post_code\": \"wc1 1aa\"\n          },\n          \"contact\": \"John Smith\",\n          \"dx_number\": \"\",\n          \"address_telephone_number\": \"\",\n          \"work_address_telephone_number\": \"\",\n          \"alt_phone_number\": \"\",\n          \"contact_preference\": \"email\",\n          \"email_address\": \"john@dodgyco.com\",\n          \"fax_number\": \"\",\n          \"organisation_employ_gb\": 10,\n          \"employment_at_site_number\": 5,\n          \"disability\": true,\n          \"disability_information\": \"Lorem ipsum disability\",\n          \"acas_certificate_number\": \"AC123456/78/90\",\n          \"acas_exemption_code\": null\n        }\n      ]\n    },\n    {\n      \"uuid\": \"f90da5e7-9dbe-45fc-af0e-3415b94a56c5\",\n      \"command\": \"BuildPrimaryRepresentative\",\n      \"data\": {\n        \"address_attributes\": {\n          \"building\": \"Rep Building\",\n          \"street\": \"Rep Street\",\n          \"locality\": \"Rep Town\",\n          \"county\": \"Rep County\",\n          \"post_code\": \"WC2 2BB\"\n        },\n        \"name\": \"Jane Doe\",\n        \"organisation_name\": \"repco ltd\",\n        \"address_telephone_number\": \"0207 987 6543\",\n        \"mobile_number\": \"07987654321\",\n        \"representative_type\": \"Private Individual\",\n        \"dx_number\": \"dx address\",\n        \"reference\": \"Rep Ref\",\n        \"contact_preference\": \"fax\",\n        \"email_address\": \"test@email.com\",\n        \"fax_number\": \"0207 345 6789\"\n      }\n    },\n    {\n      \"uuid\": \"cc985d6a-fbc3-4939-9a3a-0dede8420680\",\n      \"command\": \"BuildPdfFile\",\n      \"data\": {\n        \"data_url\": \"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf\",\n        \"data_from_key\": null,\n        \"filename\": \"et1_first_last.pdf\",\n        \"checksum\": \"ee2714b8b731a8c1e95dffaa33f89728\"\n      }\n    }\n  ]\n}"))
        .body(RawFileBody("NewSingle.json"))
        .header("Content-Type", "application/json")
        .header("Accept", "application/json"))

        .pause(5 seconds, 10 seconds)
}